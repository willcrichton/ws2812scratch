(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{13:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_logo_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),_logo_svg__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_logo_svg__WEBPACK_IMPORTED_MODULE_8__),_App_css__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(23),_App_css__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_App_css__WEBPACK_IMPORTED_MODULE_9__),blockly__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8),blockly__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(blockly__WEBPACK_IMPORTED_MODULE_10__),blockly_javascript__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1),blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(blockly_javascript__WEBPACK_IMPORTED_MODULE_11__),color_string__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(14),color_string__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(color_string__WEBPACK_IMPORTED_MODULE_12__);window.colorString=color_string__WEBPACK_IMPORTED_MODULE_12___default.a;var DEBUG=!0,NUM_PIXELS,ROTARY=0,BUTTON=!1,_last_button=!1,rpi;window.KillProg=!1,blockly__WEBPACK_IMPORTED_MODULE_10___default.a.Blocks.controls_forever={init:function(){this.jsonInit({message0:"forever",args1:[{type:"input_statement",name:"body"}],message1:"do %1",style:"loop_blocks",previousStatement:!0})}},blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.controls_forever=function(_){return"function _forever() {\n    ".concat(blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.statementToCode(_,"body"),"\n    if (!window.KillProg) {\n      setTimeout(_forever, 5);\n    }\n  }\n  _forever()")},blockly__WEBPACK_IMPORTED_MODULE_10___default.a.Blocks.number_to_index={init:function(){this.jsonInit({message0:"convert number %1",args0:[{type:"input_value",name:"number",check:"Number"}],message1:"to index of list length %1",args1:[{type:"input_value",name:"length",check:"Number"}],output:"Number"})}},blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.number_to_index=function(_){return["(".concat(blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.valueToCode(_,"number",blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.ORDER_COMMA),"-1)%").concat(blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.valueToCode(_,"length",blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.ORDER_COMMA),"+1"),blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.ORDER_NONE]};var Block=function(){function _(){Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,_)}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(_,null,[{key:"codegen",value:function(_){var e=(this.config.args0||[]).map((function(e){var t=blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.valueToCode(_,e.name,blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.ORDER_COMMA);return"Colour"===e.check&&(t="colorString.get.rgb(".concat(t,")")),t})).join(","),t="await ".concat(this.name,".execute(").concat(e,")");return this.config.output?[t,blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.ORDER_NONE]:"".concat(t,";\n")}},{key:"register",value:function(){var _=this,e=this.name,t=this.config;blockly__WEBPACK_IMPORTED_MODULE_10___default.a.Blocks[e]={init:function(){this.jsonInit(t)}},blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a[e]=function(e){return _.codegen(e)},window.cls=this}}]),_}(),CallbackBlock=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,null,[{key:"codegen",value:function(_){return"\n".concat(this.name,".register_callback(async function() {\n  ").concat(blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.statementToCode(_,"body"),"\n});\n    ")}},{key:"register_callback",value:function(_){this.callbacks.push(_)}}]),e}(Block),LightInit=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,null,[{key:"codegen",value:function(_){return"(async function() { ".concat(blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.statementToCode(_,"body")," })()")}}]),e}(Block);LightInit.config={message0:"initialize lights %1",args0:[{type:"input_statement",name:"body"}]};var LightSetPixel=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,null,[{key:"execute",value:function(){var _=Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _(e,t){return _Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:rpi.send("setpixel ".concat(e-1," ").concat(t[0]," ").concat(t[1]," ").concat(t[2]));case 1:case"end":return _.stop()}}),_)})));return function(e,t){return _.apply(this,arguments)}}()}]),e}(Block);LightSetPixel.config={args0:[{type:"input_value",name:"pixel",check:"Number"},{type:"input_value",name:"color",check:"Colour"}],message0:"set pixel %1 to color %2",nextStatement:!0,previousStatement:!0};var LightSetAllPixels=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,null,[{key:"execute",value:function(){var _=Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _(e){return _Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:rpi.send("setpixels ".concat(e[0]," ").concat(e[1]," ").concat(e[2]));case 1:case"end":return _.stop()}}),_)})));return function(e){return _.apply(this,arguments)}}()}]),e}(Block);LightSetAllPixels.config={args0:[{type:"input_value",name:"color",check:"Colour"}],message0:"set all pixels to color %1",nextStatement:!0,previousStatement:!0};var LightGetNumberPixels=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,null,[{key:"execute",value:function(){var _=Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _(){return _Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",NUM_PIXELS);case 1:case"end":return _.stop()}}),_)})));return function(){return _.apply(this,arguments)}}()}]),e}(Block);LightGetNumberPixels.config={message0:"number of pixels",output:"Number"};var LightGetDial=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,null,[{key:"execute",value:function(){var _=Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _(){return _Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",ROTARY);case 1:case"end":return _.stop()}}),_)})));return function(){return _.apply(this,arguments)}}()}]),e}(Block);LightGetDial.config={message0:"dial value",output:"Number"};var LightGetButton=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,null,[{key:"execute",value:function(){var _=Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _(){return _Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return console.log("GetButton"),_.abrupt("return",BUTTON);case 2:case"end":return _.stop()}}),_)})));return function(){return _.apply(this,arguments)}}()}]),e}(Block);function sleep(_){return new Promise((function(e){return setTimeout(e,_)}))}LightGetButton.config={message0:"is button pressed?",output:"Boolean"};var Sleep=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,null,[{key:"execute",value:function(){var _=Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _(e){return _Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,sleep(1e3*e);case 2:case"end":return _.stop()}}),_)})));return function(e){return _.apply(this,arguments)}}()}]),e}(Block);Sleep.config={previousStatement:!0,nextStatement:!0,message0:"sleep for %1 seconds",args0:[{type:"input_value",name:"time",check:"Number"}]};var LightOnButtonPress=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),e}(CallbackBlock);LightOnButtonPress.callbacks=[],LightOnButtonPress.config={message0:"When button is pressed",args1:[{type:"input_statement",name:"body"}],message1:"%1"};var LightOnDialChange=function(_){function e(){return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).apply(this,arguments))}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),e}(CallbackBlock);LightOnDialChange.callbacks=[],LightOnDialChange.config={message0:"When dial is turned",args1:[{type:"input_statement",name:"body"}],message1:"%1"};var CLASSES=[LightInit,LightSetPixel,LightSetAllPixels,LightGetNumberPixels,LightGetDial,LightGetButton,LightOnButtonPress,LightOnDialChange,Sleep];CLASSES.forEach((function(_){return _.register()}));var Coder=function(_React$Component){function Coder(_){var e;return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,Coder),(e=Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Coder).call(this,_))).state={running:!1},e.blockly=react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef(),e.toolbox=react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef(),e.save_link=react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef(),e.load_input=react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef(),e}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(Coder,_React$Component),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(Coder,[{key:"codeToString",value:function(){var _=blockly__WEBPACK_IMPORTED_MODULE_10___default.a.Xml.workspaceToDom(this.workspace);return blockly__WEBPACK_IMPORTED_MODULE_10___default.a.Xml.domToText(_)}},{key:"codeFromString",value:function(_){this.workspace.clear();var e=blockly__WEBPACK_IMPORTED_MODULE_10___default.a.Xml.textToDom(_);blockly__WEBPACK_IMPORTED_MODULE_10___default.a.Xml.domToWorkspace(e,this.workspace)}},{key:"componentDidMount",value:function(){var _=this;this.workspace=blockly__WEBPACK_IMPORTED_MODULE_10___default.a.inject(this.blockly.current,{toolbox:this.toolbox.current}),this.workspace.addChangeListener((function(e){localStorage.setItem("LIGHT_BLOCK_PROG",_.codeToString())}));var e=localStorage.getItem("LIGHT_BLOCK_PROG");e&&this.codeFromString(e);var t=this;this.load_input.current.addEventListener("change",(function(){var _=new FileReader;_.onload=function(){var _=new Uint8Array(this.result),e=String.fromCharCode.apply(null,_);t.codeFromString(e)},_.readAsArrayBuffer(this.files[0])}))}},{key:"run",value:function run(){var code=blockly_javascript__WEBPACK_IMPORTED_MODULE_11___default.a.workspaceToCode(this.workspace);console.log(code),window.KillProg=!1,this.setState({running:!0});try{eval(code)}catch(e){window.alert("Failed with error:\n".concat(e.stack))}this.setState({running:!1})}},{key:"stop",value:function(){window.KillProg=!0}},{key:"load",value:function(){this.load_input.current.click()}},{key:"save",value:function(){var _=new Blob([this.codeToString()],{type:"text/xml"}),e=URL.createObjectURL(_),t=this.save_link.current;t.href=e,t.download="program.xml",t.click(),window.URL.revokeObjectURL(e)}},{key:"render",value:function(){var _=this;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"coder"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"buttons"},this.state.running?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{className:"stop",onClick:function(){return _.stop()}},"Stop program"):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{className:"run",onClick:function(){return _.run()}},"Run program"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{onClick:function(){return _.save()}},"Save program"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("a",{style:{display:"none"},ref:this.save_link}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{onClick:function(){return _.load()}},"Load program"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("input",{style:{display:"none"},ref:this.load_input,type:"file"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"blockly",ref:this.blockly}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("xml",{ref:this.toolbox,style:{display:"none"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("category",{name:"Control"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"controls_if"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"controls_whileUntil"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"controls_for"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"controls_forEach"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"controls_repeat_ext"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"controls_forever"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("category",{name:"Math"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"logic_compare"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"math_number"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"math_arithmetic"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"math_modulo"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"number_to_index"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("category",{name:"Text"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"text"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"text_print"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("category",{name:"Light"},CLASSES.map((function(_){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:_.name})}))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("category",{name:"Color"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"colour_picker"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"colour_rgb"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("category",{name:"Lists"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"lists_create_empty"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"lists_create_with"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"lists_length"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"lists_getIndex"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("block",{type:"lists_setIndex"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("category",{name:"Variables",custom:"VARIABLE"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("category",{name:"Functions",custom:"PROCEDURE"})))}}]),Coder}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component),App=function(_){function e(_){var t;return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,e),(t=Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(e).call(this,_))).state={loaded:!1,error:!1},(rpi=new WebSocket("ws://raspberrypi.local:8000")).onclose=function(_){t.setState({error:!0})},rpi.addEventListener("open",(function(){console.log("Open"),t.setState({loaded:!0}),rpi.send("init")})),rpi.addEventListener("message",(function(_){var e=JSON.parse(_.data);DEBUG&&console.log("Received message",e),"init"===e.name?NUM_PIXELS=parseInt(e.value):"button1"===e.name?((BUTTON=e.value)&&!_last_button&&(console.log(LightOnButtonPress.callbacks),LightOnButtonPress.callbacks.map((function(_){return _()}))),_last_button=BUTTON):"rotary1"===e.name&&(ROTARY=e.value,LightOnDialChange.callbacks.map((function(_){return _()})))})),t}return Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(e,_),Object(_Users_will_Code_ws2812scratch_ui_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(e,[{key:"render",value:function(){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"app"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h1",null,"Light Maker"),this.state.error?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",null,"I wasn't able to connect to the Light Block. A few things to check:",react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("ul",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("strong",null,"Power problems:"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("ul",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("li",null,"Make sure the Light Block is plugged in."),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("li",null,"Open the top and make sure the Raspberry Pi has a red light turned on."))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("strong",null,"Network problems:"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("br",null),"To see if you have a network problem, from the terminal, run:",react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("pre",null,"ping raspberrypi.local"),"If you get the response:",react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("pre",null,"ping: cannot resolve raspberrypi.local: Unknown host"),"then the Raspberry Pi isn't connected to the same network as your computer.",react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("ul",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("li",null,"Make sure your computer is on the same Wifi as the one you set up on the Pi."),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("li",null,"At this point, you will need to manually configure Wifi on the Raspberry Pi. Plug a monitor into the HDMI port and a mouse/keyboard into the USB ports. ",react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("a",{href:"https://www.raspberrypi.org/documentation/configuration/wireless/desktop.md"},"Follow the directions here")," to setup the Pi's Wifi."))))):this.state.loaded?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(Coder,null):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",null,"Waiting to connect to the Light Block..."))}}]),e}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component);__webpack_exports__.a=App},15:function(_,e,t){_.exports=t(32)},20:function(_,e,t){},22:function(_,e,t){_.exports=t.p+"static/media/logo.5d5d9eef.svg"},23:function(_,e,t){},32:function(_,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),s=t(12),l=t.n(s),n=(t(20),t(13));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(n.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(_){_.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.be0f5c8c.chunk.js.map